externalId: my_simulator_model_revision
routineExternalId: my_simulator_routine
configuration:
  schedule:
    enabled: false
  dataSampling:
    enabled: true
    samplingWindow: 15
    granularity: 1
    validationWindow: 5
  logicalCheck:
    - enabled: true
      timeseriesExternalId: simulator_routine_revision_logical_check
      aggregate: average
      operator: lt
      value: 75.8
  steadyStateDetection:
  - enabled: true
    aggregate: average
    minSectionSize: 1
    varThreshold: 3.5
    slopeThreshold: 0.5
  inputs:
  - name: Cold water Temperature
    referenceId: CWT
    value: 10.0
    valueType: DOUBLE
    unit:
     name: C
     quantity: temperature
  - name: Cold Water Pressure
    referenceId: CWP
    value: [3.6]
    valueType: DOUBLE_ARRAY
    unit:
      name: bar
      quantity: pressure
  outputs:
  - name: Shower Temperature
    referenceId: ST
    unit:
      name: C
      quantity: temperature
    valueType: DOUBLE
script:
- order: 1
  description: Set Inputs
  steps:
  - order: 1
    stepType: Set
    description: Set Cold water Temperature
    arguments:
      referenceId: CWT
      objectName: Cold Water
      objectProperty: Temperature
  - order: 2
    stepType: Set
    description: Set Cold Water Pressure
    arguments:
      referenceId: CWP
      objectName: Cold Water
      objectProperty: Pressure
- order: 2
  description: Solve the flowsheet
  steps:
  - order: 1
    stepType: Command
    arguments:
      command: Solve
- order: 3
  description: Set simulator outputs
  steps:
  - order: 1
    stepType: Get
    arguments:
      referenceId: ST
      objectName: Shower
      objectProperty: Temperature
